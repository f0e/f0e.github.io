// tekno™®© 2021

// ------------------ killfeed ------------------ //
// (comment out for regular deathnotices)

mirv_deathmsg filter clear

mirv_deathmsg localPlayer xTrace

mirv_deathmsg filter add attackerMatch=xTrace attackerIsLocal=1 block=0
mirv_deathmsg filter add victimMatch=xTrace victimIsLocal=1 block=0

// ------------------ recording ----------------- //

// reset old settings
mirv_streams preview ""
mirv_streams remove game
mirv_streams remove blur
mirv_streams remove hud_black
mirv_streams remove hud_white
mirv_streams remove viewmodel
mirv_streams settings remove tekno_blur
mirv_streams settings remove tekno_ffmpeg_low
mirv_streams settings remove tekno_ffmpeg_medium
mirv_streams settings remove tekno_ffmpeg_high
mirv_streams settings remove tekno_ffmpeg_lossless

// set up ffmpeg recording configs
mirv_streams settings add ffmpeg tekno_ffmpeg_terrible "-c:v libx264 -pix_fmt yuv420p -preset slow -crf 30 {QUOTE}{AFX_STREAM_PATH}\video.mp4{QUOTE}"
mirv_streams settings add ffmpeg tekno_ffmpeg_low "-c:v libx264 -pix_fmt yuv420p -preset slow -crf 21 {QUOTE}{AFX_STREAM_PATH}\video.mp4{QUOTE}"
mirv_streams settings add ffmpeg tekno_ffmpeg_medium "-c:v libx264 -pix_fmt yuv420p -preset slow -crf 18 {QUOTE}{AFX_STREAM_PATH}\video.mp4{QUOTE}"
mirv_streams settings add ffmpeg tekno_ffmpeg_high "-c:v libx264 -pix_fmt yuv420p -preset slow -crf 15 {QUOTE}{AFX_STREAM_PATH}\video.mp4{QUOTE}"
mirv_streams settings add ffmpeg tekno_ffmpeg_ultra_high "-c:v libx264 -pix_fmt yuv420p -preset slow -crf 11 {QUOTE}{AFX_STREAM_PATH}\video.mp4{QUOTE}"
mirv_streams settings add ffmpeg tekno_ffmpeg_lossless "-c:v libx264 -pix_fmt yuv420p -preset slow -crf 0 {QUOTE}{AFX_STREAM_PATH}\video.mp4{QUOTE}"

// set up motion blur sampler
mirv_streams settings add sampler tekno_blur

// --------------- general config --------------- //

// your movie config
exec movie 

// hlae smoother demos
sv_cheats 1
host_timescale 0
mirv_snd_timescale 1
cl_clock_correction 0
mirv_fix playerAnimState 1

// ------------------ aliases ------------------- //

alias hide_players "cl_foot_contact_shadows 0; mirv_streams edit game actionFilter addEx isPlayer=1 action=noDraw"
alias show_players "cl_foot_contact_shadows 1; mirv_streams edit game actionFilter clear"

alias toggle_players "toggle_players_off"
alias toggle_players_off "hide_players; echo hiding players; alias toggle_players toggle_players_on"
alias toggle_players_on "show_players; echo showing players; alias toggle_players toggle_players_off"

alias rec "exec hlae_settings; demo_resume; engine_no_focus_sleep 0; host_timescale 0; mirv_streams record start"
alias end "mirv_streams record end; engine_no_focus_sleep 50; host_timescale 1; host_framerate 0; demo_pause"

// main help command
alias hlae "echo; echo -- TEKNOS HLAE CONFIG --; echo - command list; echo rec = record; echo end = stop recording; echo toggle_players = toggle player visibility; echo;"

// ----------------- settings ------------------- //

clear
hlae